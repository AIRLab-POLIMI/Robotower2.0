<?xml version="1.0" ?>
<launch>
    <!-- params -->
    <param name="forest_file" value="$(find targetted_human_tracker)/config/trained_leg_detector_res=0.33.yaml" />
    <param name="scan_topic" value="/scan" />
    <param name="fixed_frame" value="/map"/>
    <param name="scan_frequency" value="10"/>
    <param name="leg_dist_model" value="$(find targetted_human_tracker)/model/leg_distance-gmm.pkl"/>
    
    <!-- run detect_leg_clusters -->
    <node pkg="targetted_human_tracker" type="detect_leg_clusters" name="detect_leg_clusters" output="screen"/>
    
    <!-- run joint_targetted_human_tracker
    <node pkg="targetted_human_tracker" type="joint_leg_tracker.py" name="joint_leg_tracker" output="screen" /> -->

    <!-- run joint_targetted_human_tracker -->
    <node pkg="targetted_human_tracker" type="leg_distance.py" name="leg_distance" output="screen"/> 

    <!-- run joint_targetted_human_tracker -->
    <node pkg="targetted_human_tracker" type="detector.py" name="detector" output="screen"/>

     <!-- run trajectory marker -->
    <node pkg="targetted_human_tracker" type="trajectory_publisher.py" name="trajectory_publisher" required="true"/> 

    <!-- run particle_filter 
    <node pkg="targetted_human_tracker" type="particle_filter" name="particle_filter" output="screen"/> -->
 
    <!-- run local_occupancy_grid_mapping -->
    <node pkg="targetted_human_tracker" type="local_occupancy_grid_mapping" name="local_occupancy_grid_mapping" output="screen"/>

  <!-- <node pkg="targetted_human_tracker" type="test_local_occupancy_grid_mapping" name="test_local_occupancy_grid_mapping" output="screen"/> -->

  <node type="point_cloud_assembler" pkg="laser_assembler" name="cloud_assembler">
    <remap from="cloud" to="leg_cloud"/>
    <param name="max_clouds" type="int" value="400" />
    <param name="fixed_frame" type="string" value="odom" />
  </node>

  <!-- launch-prefix="xterm -e gdb args"/> -->
  
 <!-- <node pkg="targetted_human_tracker" type="motion_variance" name="motion_variance" output="screen"  required="true" /> -->

  <node pkg="targetted_human_tracker" type="spatial_temporal_node" name="spatial_temporal_node" output="screen"  required="true" />

  <node pkg="targetted_human_tracker" type="blob_publisher" name="blob_publisher" output="screen"  required="true" />

  <!-- run rviz -->
  <node pkg="rviz" type="rviz" name="rviz" />

  <!-- play rosbag normal rate param is 1-->
  <node pkg="rosbag" type="play" name="player" output="screen" required="true" 
      args="--delay=4
      --clock 
      --rate=1
      -s 0
      $(find targetted_human_tracker)/rosbags/experiments/_2017-12-12-18-45-06.bag"/>
  <param name="use_sim_time" value="true" />

</launch>
